---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "apono_access_flow Resource - terraform-provider-apono"
subcategory: ""
description: |-
  Apono Access Flow
---

# apono_access_flow (Resource)

Apono Access Flow

## Example Usage

```terraform
resource "apono_access_flow" "postgresql_prod" {
  name                = "access to PROD DB"
  active              = true
  revoke_after_in_sec = 3600
  trigger = {
    type = "user_request"
    timeframe = {
      start_time   = "00:00:00"
      end_time     = "23:59:59"
      days_in_week = ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY"]
      time_zone    = "Asia/Jerusalem"
    }
  }
  grantees_filter_group = {
    conditions_logical_operator = "OR"
    attribute_filters = [
      {
        attribute_type  = "user"
        attribute_names = ["person@example.com", "person_two@example.com"]
      },
      {
        attribute_type  = "group"
        operator        = "contains"
        attribute_names = ["R&D Team"]
      }
    ]
  }
  integration_targets = [
    {
      name          = "DB Prod"
      resource_type = "postgresql-database"
      permissions   = ["READ_ONLY", "READ_WRITE", "ADMIN"]
    }
  ]
  bundle_targets = [
    {
      name = "PROD ENV"
    }
  ]
  settings = {
    approver_cannot_self_approve = true
  }
  labels = ["DB", "PROD", "TERRAFORM"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `active` (Boolean) Indicates whether Access flow is active or inactive
- `name` (String) Access Flow name
- `revoke_after_in_sec` (Number) Number of seconds after which access should be revoked. To never revoke access, set the value to `-1`.
- `trigger` (Attributes) Access Flow trigger (see [below for nested schema](#nestedatt--trigger))

### Optional

- `approvers` (Attributes Set) Represents which identities should approve this access (see [below for nested schema](#nestedatt--approvers))
- `bundle_targets` (Attributes Set) Represents the number of resources from access bundle to which access is granted. (see [below for nested schema](#nestedatt--bundle_targets))
- `grantees` (Attributes Set, Deprecated) Represents which identities should be granted access (see [below for nested schema](#nestedatt--grantees))
- `grantees_filter_group` (Attributes) placeholder (see [below for nested schema](#nestedatt--grantees_filter_group))
- `integration_targets` (Attributes Set) Represents the number of resources from the integration to which access is granted. If both include and exclude filters are omitted, all resources will be targeted. (see [below for nested schema](#nestedatt--integration_targets))
- `labels` (List of String) List of labels to attach to the access flow
- `settings` (Attributes) Access Flow settings (see [below for nested schema](#nestedatt--settings))

### Read-Only

- `id` (String) Access Flow identifier

<a id="nestedatt--trigger"></a>
### Nested Schema for `trigger`

Required:

- `type` (String) Type of trigger.`user_request` or 'auto_grant' is supported.

Optional:

- `timeframe` (Attributes) Active duration for the trigger. (see [below for nested schema](#nestedatt--trigger--timeframe))

<a id="nestedatt--trigger--timeframe"></a>
### Nested Schema for `trigger.timeframe`

Required:

- `days_in_week` (Set of String) Names in uppercase of timeframe active days
- `end_time` (String) End of the timeframe in `HH:MM:SS` format.
- `start_time` (String) Beginning of the timeframe in `HH:MM:SS` format.
- `time_zone` (String) Timezone name for the timeframe, such as `Europe/Prague`. For all options, see  [Wiki Page](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List).



<a id="nestedatt--approvers"></a>
### Nested Schema for `approvers`

Required:

- `name` (String) Name of the identity. When `type = context_attribute`, this is the shift name or manager attribute name. When `type = group`, this is the group name. When `type = user`, this is the email address. **NOTE: If a non-unique name is used with 'group' type, Apono applies the access flow to all groups matching the name.**
- `type` (String) Identity type. **Possible Values**: `context_attribute`, `group`, or `user`


<a id="nestedatt--bundle_targets"></a>
### Nested Schema for `bundle_targets`

Required:

- `name` (String) Target bundle name. **IMPORTANT: This value must match the existing bundle name.**


<a id="nestedatt--grantees"></a>
### Nested Schema for `grantees`

Required:

- `name` (String) Name of the identity. When `type = context_attribute`, this is the shift name or manager attribute name. When `type = group`, this is the group name. When `type = user`, this is the email address. **NOTE: If a non-unique name is used with 'group' type, Apono applies the access flow to all groups matching the name.**
- `type` (String) Identity type. **Possible Values**: `context_attribute`, `group`, or `user`


<a id="nestedatt--grantees_filter_group"></a>
### Nested Schema for `grantees_filter_group`

Required:

- `attribute_filters` (Attributes List) placeholder (see [below for nested schema](#nestedatt--grantees_filter_group--attribute_filters))

Optional:

- `conditions_logical_operator` (String) Logical operator to apply to the conditions. **Possible Values**: `AND`, `OR` (Default `OR`)

<a id="nestedatt--grantees_filter_group--attribute_filters"></a>
### Nested Schema for `grantees_filter_group.attribute_filters`

Required:

- `attribute_type` (String) placeholder

Optional:

- `attribute_names` (List of String) placeholder
- `integration_id` (String) placeholder
- `operator` (String) placeholder



<a id="nestedatt--integration_targets"></a>
### Nested Schema for `integration_targets`

Required:

- `name` (String) Target integration name. **IMPORTANT: This value must match the existing integration name.**
- `permissions` (Set of String) Permissions to grant
- `resource_type` (String) Type of target resource. For possible values, query the [list integrations](https://docs.apono.io/reference/listintegrationsv2) route.

Optional:

- `resource_exclude_filters` (Attributes Set) Exclude every resource that matches one of the defined filters. (see [below for nested schema](#nestedatt--integration_targets--resource_exclude_filters))
- `resource_include_filters` (Attributes Set) Include every resource that matches one of the defined filters. (see [below for nested schema](#nestedatt--integration_targets--resource_include_filters))

<a id="nestedatt--integration_targets--resource_exclude_filters"></a>
### Nested Schema for `integration_targets.resource_exclude_filters`

Required:

- `type` (String) Type of filter, **Possible Values**: 'id', 'name' or 'tag'.
- `value` (String) Value of the filter

Optional:

- `key` (String) Key of the filter, **required** only when `type = tag`.


<a id="nestedatt--integration_targets--resource_include_filters"></a>
### Nested Schema for `integration_targets.resource_include_filters`

Required:

- `type` (String) Type of filter, **Possible Values**: 'id', 'name' or 'tag'.
- `value` (String) Value of the filter

Optional:

- `key` (String) Key of the filter, **required** only when `type = tag`.



<a id="nestedatt--settings"></a>
### Nested Schema for `settings`

Optional:

- `approver_cannot_self_approve` (Boolean) Approver cannot self-approve the request.
- `require_all_approvers` (Boolean) All approvers must approver the request.
- `require_justification_on_request_again` (Boolean) Require justification on request again.
