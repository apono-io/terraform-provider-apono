---
page_title: "apono_resource_integration (beta) Resource - terraform-provider-apono"
subcategory: ""
description: |-
    Manages a Resource Integration, allowing Apono to connect and manage external cloud resources.
---

# Resource: apono_resource_integration (beta)

Manages a Resource Integration, allowing Apono to connect and manage external cloud resources.

-> **Note** Please note this resource is in **beta**.

## Example Usage

### AWS Account Integration

```terraform
resource "apono_resource_integration" "aws_account_integration" {
  name         = "AWS Account Integration"
  type         = "aws-account"
  connector_id = "AwsIntegrationConnector-Semyon-NDPp"
  connected_resource_types = [
    "aws-account-iam-group",
    "aws-account-s3-bucket"
  ]
  integration_config = {
    region                              = "us-east-1"
    profile                             = "apono"
    credentials_rotation_period_in_days = "30"
    credentials_cleanup_period_in_days  = "90"
  }
}
```

### PostgreSQL Database Integration with AWS Secret Store

```terraform
resource "apono_resource_integration" "postgresql_prod_dbs" {
  name         = "PostgreSQL Production Databases"
  type         = "postgresql"
  connector_id = "AwsConnector-ProdTeam-XYZ123"
  connected_resource_types = [
    "postgresql-database",
    "postgresql-table"
  ]
  integration_config = {
    hostname = "prod-postgresql.us-east-1.internal.example.com"
    port     = "5432"
    dbname   = "postgres"
    sslmode  = "disable"
  }
  secret_store_config = {
    aws = {
      region    = "us-east-1"
      secret_id = "arn:aws:secretsmanager:us-east-1:123456789012:secret:/prod/postgresql/apono"
    }
  }
  custom_access_details = "Please make sure to connect to VPN before accessing the DBs"
}
```

### GCP Integration with Owner Assignment 

```terraform
resource "apono_resource_integration" "gcp_sql_integration" {
  name         = "GCP SQL Databases"
  type         = "gcp-organization"
  connector_id = "GcpConnector-Example"
  connected_resource_types = [
    "gcp-organization-project"
  ]
  integration_config = {
    project_id = "gcp-production-project"
    location   = "us-central1"
  }
  secret_store_config = {
    gcp = {
      project   = "gcp-secrets-project"
      secret_id = "projects/1234567890/secrets/sql-db-credentials"
    }
  }
  owner = {
    attribute_type          = "user"
    attribute_value         = ["example@company.io"]
    source_integration_name = "Google Oauth"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `connected_resource_types` (List of String) List of resource types for the integration to discover.
- `connector_id` (String) ID of the Apono Connector used for the integration.
- `integration_config` (Map of String) Integration-specific configuration that accepts key-value pairs. Refer to the [Integration Configuration documentation](https://docs.apono.io/metadata-for-integration-config) for specific configuration values.
- `name` (String) Human-readable name for the integration, must be unique within Apono.
- `type` (String) Type of the integration (e.g., "aws-account", "postgresql").

### Optional

- `custom_access_details` (String) Custom access instructions for end users, displayed in the access details modal.
- `owner` (Attributes) Apono can use the integration owner for access requests approval if no owner is found. Enter one or more users, groups, shifts or attributes. This field is mandatory when using Resource Owners and serves as a fallback approver if no resource owner is found. (see [below for nested schema](#nestedatt--owner))
- `owners_mapping` (Attributes) Apono will sync each resource's owner from the source integration. Use this for Resource Owner access requests approval. (see [below for nested schema](#nestedatt--owners_mapping))
- `secret_store_config` (Attributes) Configuration for secret management. Only one secret store can be configured at a time. (see [below for nested schema](#nestedatt--secret_store_config))

### Read-Only

- `id` (String) Unique identifier for the integration.

<a id="nestedatt--owner"></a>
### Nested Schema for `owner`

Required:

- `type` (String) Type of the owner attribute.
- `values` (List of String) List of values for the ownership assignment.

Optional:

- `source_integration_name` (String) Name of the integration from which the type originates from (e.g. “Google Oauth”).


<a id="nestedatt--owners_mapping"></a>
### Nested Schema for `owners_mapping`

Required:

- `attribute_type` (String) Type of the attribute.
- `key_name` (String) Attribute key to map owner.

Optional:

- `source_integration_name` (String) Name of the source integration.


<a id="nestedatt--secret_store_config"></a>
### Nested Schema for `secret_store_config`

Optional:

- `aws` (Attributes) AWS secret store configuration. (see [below for nested schema](#nestedatt--secret_store_config--aws))
- `azure` (Attributes) Azure secret store configuration. (see [below for nested schema](#nestedatt--secret_store_config--azure))
- `gcp` (Attributes) GCP secret store configuration. (see [below for nested schema](#nestedatt--secret_store_config--gcp))
- `hashicorp_vault` (Attributes) HashiCorp Vault secret store configuration. (see [below for nested schema](#nestedatt--secret_store_config--hashicorp_vault))
- `kubernetes` (Attributes) Kubernetes secret store configuration. (see [below for nested schema](#nestedatt--secret_store_config--kubernetes))

<a id="nestedatt--secret_store_config--aws"></a>
### Nested Schema for `secret_store_config.aws`

Required:

- `region` (String) The AWS region.
- `secret_id` (String) The AWS secret ID.


<a id="nestedatt--secret_store_config--azure"></a>
### Nested Schema for `secret_store_config.azure`

Required:

- `name` (String) The Azure secret name.
- `vault_url` (String) The Azure Vault URL.


<a id="nestedatt--secret_store_config--gcp"></a>
### Nested Schema for `secret_store_config.gcp`

Required:

- `project` (String) The GCP project.
- `secret_id` (String) The GCP secret ID.


<a id="nestedatt--secret_store_config--hashicorp_vault"></a>
### Nested Schema for `secret_store_config.hashicorp_vault`

Required:

- `path` (String) The HashiCorp Vault path.
- `secret_engine` (String) The HashiCorp Vault secret engine.


<a id="nestedatt--secret_store_config--kubernetes"></a>
### Nested Schema for `secret_store_config.kubernetes`

Required:

- `name` (String) The Kubernetes secret name.
- `namespace` (String) The Kubernetes namespace.

## Import

In Terraform v1.5.0 and later, use an import block to import apono_resource_integrations using the resource integration identifier. For example:

```terraform
import {
  to = apono_resource_integration.example
  id = "123e4567-e89b-12d3-a456-426614174000"
}
```

Or using the CLI:

```shell
terraform import apono_resource_integration.example 123e4567-e89b-12d3-a456-426614174000
```
