---
page_title: "apono_bundle_v2 (beta) Resource - terraform-provider-apono"
subcategory: ""
description: |-
    Manages an Apono Bundle, which defines a collection of access targets - either access scopes or specific resources within integrations.
---

# Resource: apono_bundle_v2 (beta)

Manages an Apono Bundle, which defines a collection of access targets - either access scopes or specific resources within integrations.

-> **Note** Please note this resource is in **beta**.

## Example Usage

### Access Scope and Integration as Access Target

```terraform
resource "apono_bundle_v2" "aws_roles_and_policies_bundle" {
  name = "Access To AWS Roles and Policies"

  access_targets = [
    {
      access_scope = {
        name = "AWS Production IAM Policies"
      }
    },
    {
      integration = {
        integration_name = "Amazon Account Integration"
        resource_type    = "aws-account-iam-role"
        permissions      = ["Attach"]
      }
    }
  ]
}
```

### S3 Bucket Resources Specified using Names as Access Targets

```terraform
resource "apono_bundle_v2" "s3_bucket_bundle" {
  name = "S3 Logs and Sensitive Buckets"

  access_targets = [
    {
      integration = {
        integration_name = "Amazon Account Integration"
        resource_type    = "aws-account-s3-bucket"
        resources_scopes = [{
          scope_mode = "include_resources"
          type       = "NAME"
          values = [
            "s3-logs-to-grafana",
            "s3-sensitive-data"
          ]
        }]
        permissions = ["ADMIN"]
      },
      integration = {
        integration_name = "Amazon Organization Integration"
        resource_type    = "aws-organization-s3-bucket"
        resources_scopes = [{
          scope_mode = "include_resources"
          type       = "NAME"
          values = [
            "s3-logs-to-Kibana",
            "s3-sensitive-data"
          ]
        }]
        permissions = ["ADMIN"]
      }
    }
  ]
}
```

### Big Query Resources Specified using APONO_ID as Access Targets

```terraform
resource "apono_bundle_v2" "big_query_viewer_bundle" {
  name = "BigQuery Viewer"

  access_targets = [
    {
      integration = {
        integration_name = "GCP Integration"
        resource_type    = "gcp-organization-bigquery-dataset"
        resources_scopes = [{
          scope_mode = "include_resources"
          type       = "APONO_ID"
          values = [
            "d92a7f33b4d832c55dca9e2afc3d9985de4a227abb1a88e0f9c3dc08b12b57e6",
            "8f00e1a39a7f4cf2d22d1f30aebf6dcf7a5dbf83d912b4ea5c6c6fcb22cf1d09",
            "719d1626f380b0f9c8aab3ee92c5371706d816e32ebee0cb6b84e7cd759d2a0e"
          ]
        }]
        permissions = ["BigQuery Data Viewer"]
      }
    }
  ]
}
```

### AWS Accounts Specified using a Tag as Access Targets

```terraform
resource "apono_bundle_v2" "aws_accounts_bundle" {
  name = "AWS Account Bundle"

  access_targets = [
    {
      integration = {
        integration_name = "AWS ORG"
        resource_type    = "aws-organization-account"
        resources_scopes = [{
          scope_mode = "include_resources"
          type       = "TAG"
          key        = "aws_account_id"
          values     = ["46000000255"]
        }]
        permissions = ["TestRunner"]
      }
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `access_targets` (Attributes List) A list of access targets included in the bundle. (see [below for nested schema](#nestedatt--access_targets))
- `name` (String) Human-readable name for the access flow, must be unique.

### Read-Only

- `id` (String) The unique identifier of the bundle.

<a id="nestedatt--access_targets"></a>
### Nested Schema for `access_targets`

Optional:

- `access_scope` (Attributes) Access scope target. (see [below for nested schema](#nestedatt--access_targets--access_scope))
- `integration` (Attributes) Defines an integration and resources to which access will be granted. (see [below for nested schema](#nestedatt--access_targets--integration))

<a id="nestedatt--access_targets--access_scope"></a>
### Nested Schema for `access_targets.access_scope`

Required:

- `name` (String) Name of the access scope.


<a id="nestedatt--access_targets--integration"></a>
### Nested Schema for `access_targets.integration`

Required:

- `integration_name` (String) The name of the integration
- `permissions` (Set of String) List of permissions (e.g., "Attach", "ReadOnlyAccess").
- `resource_type` (String) The type of resource within the integration for which access is being granted (e.g., aws-account-s3-bucket).

Optional:

- `resources_scopes` (Attributes List) A list of filters defining which resources are included or excluded. If null, the scope will apply to any resource in the integration target (see [below for nested schema](#nestedatt--access_targets--integration--resources_scopes))

<a id="nestedatt--access_targets--integration--resources_scopes"></a>
### Nested Schema for `access_targets.integration.resources_scopes`

Required:

- `scope_mode` (String) Possible values: `include_resources` or `exclude_resources`. `include_resources`: Grants access to the specific resources listed under the `values` field. `exclude_resources`: Grants access to all resources within the integration except those specified in the `values` field.
- `type` (String) NAME - specify resources by their name, APONO_ID - specify resources by their ID, or TAG - specify resources by tag.
- `values` (List of String) Resource values to match (IDs, names, or tag values).

Optional:

- `key` (String) Tag key. Only required if type = TAG

## Import

In Terraform v1.5.0 and later, use an import block to import apono_bundle_v2 using the bundle identifier. For example:

```terraform
import {
  to = apono_bundle_v2.example_bundle
  id = "123e4567-e89b-12d3-a456-426614174000"
}
```

Using terraform import, import apono_bundle_v2 with the bundle ID. For example:

```shell
terraform import apono_bundle_v2.example_bundle 123e4567-e89b-12d3-a456-426614174000
```
